type Array a

foo : all (a, obsv :< DS). (Array a, obsv) -> Array a
foo (as, o) = let ?o = o
               in map (as, \a => bar (a, ?o))

bar : all (a, obsv :< DS). (a, obsv) -> a

map : all (a, obsv :< DS). {?o : obsv} -> (Array a, {?o : obsv} -> a -> a) -> Array a
